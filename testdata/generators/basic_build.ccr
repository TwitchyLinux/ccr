build(
  name      = "simple_build",
  steps     = [
    step.unpack_gz(to = 'src', path = 'cool.tar.gz'),
  ],
  output    = {
    'src/cool.txt': 'cool.txt',
  },
  host_deps = [
    ":binutils",
  ],
)

toolchain(
  name = "binutils",
  binaries = {
    "ls": "/bin/ls",
    "cp": "/bin/cp",
  },
)

build(
  name      = "missing_dep_build",
  steps     = [
    step.unpack_gz(to = 'src', path = 'cool.tar.gz'),
  ],
  output    = {
    'src/cool.txt': 'cool.txt',
  },
  host_deps = [
    ":missing",
  ],
)


toolchain(
  name     = "missing",
  binaries = {
    "something_missing": "/dfgldikfjdfghlkdfgjhkldfgjh",
  },
)

resource(
  name   = "output",
  parent = "common://resources:file",
  path   = "cool.txt",
  source = ":simple_build",
)

resource(
  name   = "output_missing_in_build",
  parent = "common://resources:file",
  path   = "missing.txt",
  source = ":simple_build",
)

resource(
  name   = "output_missing_host_dep",
  parent = "common://resources:file",
  path   = "missing.txt",
  source = ":missing_dep_build",
)
