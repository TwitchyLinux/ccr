resource(
  name   = 'usr_dir',
  parent = 'common://resources:dir',
  path   = '/usr',
  mode   = '0755',
  source = 'common://generators:dir',
)

resource(
  name   = 'usr_lib',
  parent = 'common://resources:library_dir',
  path   = '/lib2',
  source = 'common://generators:dir',
  deps   = [
    ":usr_dir",
  ],
)

resource(
  name   = 'lib_something',
  parent = 'common://resources:sys_library',
  path   = '/usr/lib/libsomething.so',
  source = file('libsomething.so'),
  deps   = [
    ":usr_lib",
  ],
)

resource(
  name   = 'test_bin',
  parent = 'common://resources:binary',
  path   = '/usr/bin',
  source = file('bin'),
  deps   = [
    ":usr_dir",
    ":lib_something",
  ],
)

resource(
  name   = 'lib64',
  parent = 'common://resources:library_dir',
  path   = '/lib64',
  source = 'common://generators:dir',
)

resource(
  name   = 'ldd',
  parent = 'common://resources:sys_library',
  path   = '/lib64/ld-linux-x86-64.so.2',
  source = file('ld.so.2'),
  deps   = [
    ":lib64",
  ],
)

component(
  name = "core",
  deps = [
    ":test_bin",
    ":shared_libraries",
  ],
  chks = [
    "common://checks/universe:syslib_linking",
  ],
)

component(
  name = "shared_libraries",
  deps = [
    ":ldd",
    ":lib_something",
  ],
)
